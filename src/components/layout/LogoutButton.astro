---
interface Props {
    className: string;
}

const { className } = Astro.props;
---

<button class={className} id="logout" type="button"><slot /></button>
<script>
    import { fetchAPIPOST } from "../../utils/fetchAPI";

    const logoutButton = document.getElementById("logout");

    if (logoutButton) {
        logoutButton.addEventListener("click", async () => {
            try {
                await fetchAPIPOST({ url: "/logout" });
                window.location.replace("/login");
            } catch (err) {
                console.error(err);
            }
        });
    }
</script>
